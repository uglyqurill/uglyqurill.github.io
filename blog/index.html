<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Блог — Кирилл Брызгунов</title>
  <link rel="stylesheet" href="../styles.css" />
</head>
<body>
  <div class="container">
    <nav class="nav">
      <a href="../index.html">Главная</a>
      <a href="./index.html">Блог</a>
    </nav>

    <section class="card">
      <h1>Блог</h1>
      <p class="muted">Заметки о продукте, AI и преподавании.</p>
    </section>

    <section id="posts"></section>

    <footer class="footer">
      © <span id="year"></span> Кирилл Брызгунов
    </footer>
  </div>

  <script>
    async function loadPosts(){
      const container = document.getElementById('posts');
      const res = await fetch('./posts.json');
      const posts = await res.json();
      posts.sort((a,b)=> new Date(b.date) - new Date(a.date));
      for(const p of posts){
        const el = document.createElement('article');
        el.className = 'card';
        el.innerHTML = `
          <h2><a href="./post.html?slug=${encodeURIComponent(p.slug)}">${p.title}</a></h2>
          <div class="muted">${p.date}</div>
        `;
        container.appendChild(el);
      }
      document.getElementById('year').textContent = new Date().getFullYear();
    }
    loadPosts();
  </script>
</body>
</html>
